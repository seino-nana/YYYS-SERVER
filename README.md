# 接口文档

## 业务组

### 获取首页数据

接口说明:

- 一次拉取首页所有数据，可选某个分类

请求方式:

- GET

请求URL:

- `/home/data`

参数:

| 参数名   | 必选 | 类型   | 说明                                         |
| :------- | :--- | :----- | -------------------------------------------- |
| typeDesc | 否   | string | 默认全选，可选（推荐/电影/连续剧/综艺/动漫） |



### 获取轮播图数据

接口说明：

- 获取所有轮播图，可选某个分类

请求方式：

- GET

请求URL：

- `/home/banners`

参数：

| 参数名   | 必选 | 类型   | 说明                                         |
| :------- | :--- | :----- | -------------------------------------------- |
| typeDesc | 否   | string | 默认全选，可选（推荐/电影/连续剧/综艺/动漫） |



### 条件分类查询

接口说明:

- 根据条件获取分类

请求方式:

- GET

请求URL:

- `/movies/category`

参数：

| 参数名    | 必选 | 类型   | 说明                  |
| :-------- | :--- | :----- | --------------------- |
| typeDesc  | 否   | string | 电影/连续剧/综艺/动漫 |
| cat       | 否   | string | 子分类                |
| categorys | 否   | string | 孙子分类              |
| area      | 否   | string | 地区                  |
| year      | 否   | string | 年份                  |
| sort      | 否   | number | 排序 默认/最新/最热   |
| page      | 是   | number | 页码                  |
| num       | 是   | number | 页码量                |



### 查询id详情

接口说明:

- 根据movieId获取影片数据

请求方式:

- GET

请求URL:

- `/movies/detail`

参数：

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| movieId | 是   | number | 影片id |



### 模糊查询

接口说明:

- 通过关键词进行模糊查询

请求方式:

- GET

请求URL:

- `/movies/search`

参数：

| 参数名   | 必选 | 类型   | 说明                 |
| :------- | :--- | :----- | -------------------- |
| keywords | 是   | string | 搜索关键词           |
| range    | 否   | number | 影名(默认)/导演/演员 |
| page     | 是   | number | 页码                 |
| num      | 是   | number | 页码量               |



### 增加点击量

接口说明:

- 通过movieId增加影片点击量

请求方式:

- POST

请求URL:

- `/movies/addPlayCount`

参数：

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| movieId | 是   | string | 影片id |



### 提交用户反馈

接口说明:

- 在用户登录的情况下，填写表单提交用户反馈(需获取token)

请求方式:

- POST

请求URL:

- `/addProblem`

参数：

| 参数名  | 必选 | 类型   | 说明     |
| :------ | :--- | :----- | -------- |
| content | 是   | string | 反馈信息 |



## 用户组

### 用户登录

接口说明:

- 通过账号密码进行账户登入

请求方式:

- POST

请求URL:

- `/login`

参数：

| 参数名   | 必选 | 类型   | 说明 |
| :------- | :--- | :----- | ---- |
| username | 是   | string | 账号 |
| password | 是   | string | 密码 |



### 注册用户

接口说明:

- 注册用户

请求方式:

- POST

请求URL:

- `/user`

参数：

| 参数名   | 必选 | 类型   | 说明               |
| :------- | :--- | :----- | ------------------ |
| username | 是   | string | 用户名             |
| password | 是   | string | 密码               |
| grade    | 是   | string | 权限 1（默认）/2/3 |



### 获取用户信息

接口说明:

- 获取用户信息(需获取token)

请求方式:

- POST

请求URL:

- `/user`

参数：无（仅携带token）



### 编辑用户信息

接口说明:

- 编辑用户信息(需获取token)

请求方式:

- POST

请求URL:

- `/user/info/update`

参数：无（仅携带token）



### 获取用户历史记录

接口说明:

- 获取用户历史记录(需获取token)

请求方式:

- GET

请求URL:

- `/user/history`

参数：无（仅携带token）



### 添加新的历史记录

接口说明:

- 添加新的历史记录(需获取token)

请求方式:

- POST

请求URL:

- `/user/history/add`

参数：

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| movieId | 是   | string | 影片id |



### 批量删除历史记录

接口说明:

- 批量删除历史记录(需获取token)

请求方式:

- POST

请求URL:

- `/user/history/delete`

参数：

| 参数名 | 必选 | 类型  | 说明           |
| :----- | :--- | :---- | -------------- |
| ids    | 是   | array | 历史记录的数组 |



### 获取用户收藏列表

接口说明:

- 获取用户收藏列表(需获取token)

请求方式:

- GET

请求URL:

- `/user/collect`

参数：无（仅携带token）



### 添加新的收藏

接口说明:

- 添加新的历史记录(需获取token)

请求方式:

- POST

请求URL:

- `/user/collect/add`

参数：

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| movieId | 是   | string | 影片id |



### 批量取消收藏

接口说明:

- 批量取消收藏(需获取token)

请求方式:

- POST

请求URL:

- `/user/collect/delete`

参数：

| 参数名 | 必选 | 类型  | 说明             |
| :----- | :--- | :---- | ---------------- |
| ids    | 是   | array | 取消收藏所需数组 |
